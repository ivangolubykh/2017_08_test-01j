<!DOCTYPE html>
<html lang="ru" ng-app="TaskListApp">
<head>
    <meta charset="utf-8">
    <title>Cписок задач</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular-cookies.js"></script>
    <script>var project_dir = '/portfolio/2017_08_test-01j/';</script>
    <script src="static/js/task_list_ctrl.js"></script>
</head>
<body ng-controller="TaskListCtrl">
    <h2 class="text-center">SPA-приложение "Cписок задач"</h2>

    <form class="container" name="AddTaskForm">
      <input type="hidden" name="csrfmiddlewaretoken" value="{{csrf_token_value}}" ng-model="add_task.csrfmiddlewaretoken">
      <div class="form-group row">
        <label for="task_name" class="col-sm-2 col-form-label col-form-label-lg">Название задачи:</label>
        <div class="col-sm-10">
          <input type="text" class="form-control form-control-lg" id="task_name" placeholder="Название задачи" ng-model="add_task.name">
        </div>
      </div>
      <div class="form-group row">
        <label for="task_text" class="col-sm-2 col-form-label col-form-label-lg">Текст задачи:</label>
        <div class="col-sm-10">
          <textarea type="text" class="form-control form-control-lg" id="task_text" placeholder="Текст задачи" ng-model="add_task.text"></textarea>
        </div>
      </div>
      <button type="submit" class="btn btn-secondary" ng-click="add(AddTaskForm)">Добавить новую задачу</button>
    </form>

    <hr>

    <div class="table-responsive">
      <table class="table table-hover">
        <thead>
          <tr>
              <th class="text-center">Задача</th>
              <th class="text-center">Изменить</th>
              <th class="text-center">Удалить</th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="(key, value) in data_dict">
            <td>
              <p><b><i>{{value.name}}</i></b></p>
              <p>{{value.text}}</p>
            </td>
            <td class="text-center" style="vertical-align: middle;"><button class="btn btn-secondary" type="button" ng-click="edit(key)">Изменить</button></td>
            <td class="text-center" style="vertical-align: middle;"><button class="btn btn-secondary" type="button" ng-click="del(key)">Удалить</button></td>
          </tr>
        </tbody>

      </table>
    </div>

    <footer class="footer">
        <div class="container">
            <p class="text-muted">&copy; <a href="http://allworld.xyz/portfolio/2017_portfolio/">Иван Борисович Голубых</a></p>
        </div>
    </footer>
</body>
</html>
